# export $(grep -v '^#' .env | xargs)
command git 2>/dev/null || (apk add git 2>/dev/null) || (apt update 2>/dev/null && apt install -y git) || (yum -y install git 2>/dev/null)

git clone https://github.com/AlexBurnes/practice-sort_keys  /practice-sort_keys
cd /practice-sort_keys
if [ ! -z "${BRANCH-}" ]; then
  git checkout ${BRANCH}
fi
git submodule init
git submodule update

echo "ğŸ” platform"
buildfab platform-view -v

echo "ğŸ”§ install system requirements"
buildfab ci-pre-install -vv

echo -e "ğŸ”§ init conan cache"
if [ -d /tmp/buildfab-cache-conan ]; then
    CACHE_DIR=/tmp/buildfab-cache-conan/${OS}${OS_VERSION}/.conan2
    mkdir -p ${CACHE_DIR}
    rm -fr ${HOME}/.conan2
    ln -s ${CACHE_DIR} ${HOME}/.conan2
fi

echo "ğŸ”§ install build tools requirements"
buildfab pre-install -vv



